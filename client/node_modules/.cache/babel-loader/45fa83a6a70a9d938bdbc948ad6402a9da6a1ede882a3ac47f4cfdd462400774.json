{"ast":null,"code":"import{createContext,useContext,useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import listData from\"../data/lists.json\";import{UserContext}from\"./UserProvider\";import{jsx as _jsx}from\"react/jsx-runtime\";export const ListDetailContext=/*#__PURE__*/createContext();function ListDetailProvider(_ref){let{children}=_ref;const{activeList,setActiveList}=useContext(UserContext);const[list,setList]=useState(\"\");const{id}=useParams();useEffect(()=>{if(!activeList&&id){setActiveList(id);}},[id,activeList,setActiveList]);useEffect(()=>{if(activeList){const foundList=listData.find(list=>list.id===activeList);setList(foundList||null);}},[activeList]);if(!listData||!list){return/*#__PURE__*/_jsx(\"p\",{children:\"This URL does not exist.\"});}const changeName=newName=>{setList(prevList=>({...prevList,name:newName}));};const addItem=(itemName,quantity)=>{setList(prevList=>({...prevList,items:[...prevList.items,{id:Math.random().toString(),name:itemName,qty:quantity,checked:false}]}));};const addUser=userID=>{setList(prevList=>({...prevList,guests:[...prevList.guests,userID]}));};const removeUser=userID=>{setList(prevList=>({...prevList,guests:prevList.guests.filter(user=>user!==userID)}));};const changeItem=itemID=>{setList(prevList=>({...prevList,items:prevList.items.map(item=>item.id===itemID?{...item,checked:!item.checked}:item)}));};const deleteItem=itemID=>{setList(prevList=>({...prevList,items:prevList.items.filter(item=>item.id!==itemID)}));};const value={list,changeName,addItem,addUser,removeUser,changeItem,deleteItem};return/*#__PURE__*/_jsx(ListDetailContext.Provider,{value:value,children:children});}export default ListDetailProvider;","map":{"version":3,"names":["createContext","useContext","useState","useEffect","useParams","listData","UserContext","jsx","_jsx","ListDetailContext","ListDetailProvider","_ref","children","activeList","setActiveList","list","setList","id","foundList","find","changeName","newName","prevList","name","addItem","itemName","quantity","items","Math","random","toString","qty","checked","addUser","userID","guests","removeUser","filter","user","changeItem","itemID","map","item","deleteItem","value","Provider"],"sources":["/Users/vojtechvitek/Projects/ListApp/client/src/providers/ListDetailProvider.js"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport listData from \"../data/lists.json\";\nimport { UserContext } from \"./UserProvider\";\n\nexport const ListDetailContext = createContext();\n\nfunction ListDetailProvider({ children }) {\n  const { activeList, setActiveList } = useContext(UserContext);\n  const [list, setList] = useState(\"\");\n  const { id } = useParams();\n\n\n  useEffect(() => {\n    if (!activeList && id) {\n      setActiveList(id);\n    }\n  }, [id, activeList, setActiveList]);\n\n  useEffect(() => {\n    if (activeList) {\n      const foundList = listData.find((list) => list.id === activeList);\n      setList(foundList || null);\n    }\n  }, [activeList]);\n\n  if (!listData || !list) {\n    return <p>This URL does not exist.</p>;\n  }\n\n  const changeName = (newName) => {\n    setList((prevList) => ({\n      ...prevList,\n      name: newName,\n    }));\n  };\n\n  const addItem = (itemName, quantity) => {\n    setList((prevList) => ({\n      ...prevList,\n      items: [\n        ...prevList.items,\n        {\n          id: Math.random().toString(),\n          name: itemName,\n          qty: quantity,\n          checked: false,\n        },\n      ],\n    }));\n  };\n\n  const addUser = (userID) => {\n    setList((prevList) => ({\n      ...prevList,\n      guests: [...prevList.guests, userID],\n    }));\n  };\n\n  const removeUser = (userID) => {\n    setList((prevList) => ({\n      ...prevList,\n      guests: prevList.guests.filter((user) => user !== userID),\n    }));\n  };\n\n  const changeItem = (itemID) => {\n    setList((prevList) => ({\n      ...prevList,\n      items: prevList.items.map((item) =>\n        item.id === itemID ? { ...item, checked: !item.checked } : item\n      ),\n    }));\n  };\n\n  const deleteItem = (itemID) => {\n    setList((prevList) => ({\n      ...prevList,\n      items: prevList.items.filter((item) => item.id !== itemID),\n    }));\n  };\n\n\n  const value = {\n    list,\n    changeName,\n    addItem,\n    addUser,\n    removeUser,\n    changeItem,\n    deleteItem,\n  };\n\n  return (\n    <ListDetailContext.Provider value={value}>\n      {children}\n    </ListDetailContext.Provider>\n  );\n}\n\nexport default ListDetailProvider;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}