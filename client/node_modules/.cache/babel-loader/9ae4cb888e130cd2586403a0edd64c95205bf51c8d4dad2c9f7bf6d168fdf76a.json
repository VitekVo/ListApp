{"ast":null,"code":"import React,{useContext,useState}from'react';import{useNavigate}from'react-router-dom';import{ListDetailContext}from'../../providers/ListDetailProvider';import{UserContext}from'../../providers/UserProvider';import{Modal}from'react-bootstrap';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageUsers=()=>{const{list,addUser,removeUser}=useContext(ListDetailContext);const{userList,loggedInUser}=useContext(UserContext);const[userID,setUserID]=useState('');const[message,setMessage]=useState('');const[showModal,setShowModal]=useState(false);const handleClose=()=>setShowModal(false);const navigate=useNavigate();const guests=userList.filter(user=>list.guests.includes(user.id));const handleSubmit=e=>{e.preventDefault();const userIdValid=userList.some(user=>user.id===userID);if(list.guests.includes(userID)){setMessage('This user is already on the list');setShowModal(true);}else if(!list.guests.includes(loggedInUser)&&loggedInUser!==list.host){navigate('/list-overview');}else if(!userIdValid){setMessage('Invalid user ID');setShowModal(true);}else{setMessage('User added successfully');setShowModal(true);addUser(userID);setUserID('');}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Guest List\"}),/*#__PURE__*/_jsx(\"ul\",{children:guests.map(guest=>/*#__PURE__*/_jsxs(\"li\",{children:[guest.name,loggedInUser===list.host&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:()=>removeUser(guest.id),children:\"Remove\"})]},guest.id))})]}),loggedInUser===list.host&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"invite-user\",className:\"form-label\",children:\"Enter user's ID to add him to this list\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"invite-user\",name:\"inviteUser\",className:\"form-control\",placeholder:\"e.g., u1\",value:userID,onChange:e=>setUserID(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Add user\"})]}),loggedInUser!==list.host&&/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-danger\",onClick:()=>removeUser(loggedInUser),children:\"Leave list\"}),/*#__PURE__*/_jsxs(Modal,{show:showModal,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{})}),/*#__PURE__*/_jsx(Modal.Body,{children:message}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>handleClose(),children:\"Ok\"})})]})]});};export default ManageUsers;","map":{"version":3,"names":["React","useContext","useState","useNavigate","ListDetailContext","UserContext","Modal","jsx","_jsx","jsxs","_jsxs","ManageUsers","list","addUser","removeUser","userList","loggedInUser","userID","setUserID","message","setMessage","showModal","setShowModal","handleClose","navigate","guests","filter","user","includes","id","handleSubmit","e","preventDefault","userIdValid","some","host","onSubmit","children","map","guest","name","className","onClick","htmlFor","type","placeholder","value","onChange","target","show","onHide","Header","closeButton","Title","Body","Footer"],"sources":["/Users/vojtechvitek/Projects/ListApp/client/src/components/modalsforms/ManageUsersForm.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { ListDetailContext } from '../../providers/ListDetailProvider';\nimport { UserContext } from '../../providers/UserProvider';\nimport { Modal } from 'react-bootstrap'\n\nconst ManageUsers = () => {\n  const { list, addUser, removeUser } = useContext(ListDetailContext);\n  const { userList, loggedInUser } = useContext(UserContext);\n  const [userID, setUserID] = useState('');\n  const [message, setMessage] = useState('');\n  const [showModal, setShowModal] = useState(false);\n  const handleClose = () => setShowModal(false)\n  const navigate = useNavigate();\n\n  const guests = userList.filter(user => list.guests.includes(user.id));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const userIdValid = userList.some((user) => user.id === userID);\n\n    if (list.guests.includes(userID)) {\n      setMessage('This user is already on the list'); \n      setShowModal(true);\n    } \n    else if (!(list.guests.includes(loggedInUser)) && (loggedInUser !== list.host)) {\n      navigate('/list-overview');\n    }\n    else if (!userIdValid) {\n      setMessage('Invalid user ID');\n      setShowModal(true);\n    }\n    else {\n      setMessage('User added successfully');\n      setShowModal(true);\n      addUser(userID);\n      setUserID('');\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n        <div>\n        <h2>Guest List</h2>\n        <ul>\n          {guests.map(guest => (\n            <li key={guest.id}>\n              {guest.name} \n              {(loggedInUser === list.host) &&\n              <button className=\"btn btn-danger\" onClick={() => removeUser(guest.id)}>Remove</button>\n              }\n            </li>\n          ))}\n        </ul>\n      </div>\n    {(loggedInUser === list.host) && \n    <div>\n        <label htmlFor=\"invite-user\" className=\"form-label\">Enter user's ID to add him to this list</label>\n        <input\n          type=\"text\"\n          id=\"invite-user\"\n          name=\"inviteUser\"\n          className=\"form-control\"\n          placeholder=\"e.g., u1\"\n          value={userID}\n          onChange={(e) => setUserID(e.target.value)}\n        />\n      <button type=\"submit\" className=\"btn btn-primary\">Add user</button>\n    </div>\n    }\n\n      {loggedInUser !== list.host &&\n      <button type=\"submit\" className=\"btn btn-danger\" onClick={()=>removeUser(loggedInUser)}>Leave list</button>\n}\n      <Modal show={showModal} onHide={handleClose}>\n        <Modal.Header closeButton>\n          <Modal.Title></Modal.Title>\n        </Modal.Header>\n        <Modal.Body>{message}</Modal.Body>\n        <Modal.Footer><button className=\"btn btn-secondary\" onClick={() =>handleClose()}>Ok</button></Modal.Footer>\n      </Modal>\n    </form>\n  );\n};\n\nexport default ManageUsers;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}